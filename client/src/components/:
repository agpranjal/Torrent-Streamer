import React from "react";
import Files from "./Files";

import "./Files.css";

class Stream extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            streaming: false,
            source: ""
        };
    }

    streamTorrent = (fileName) => {
        console.log("Streaming...");
        console.log(fileName);

        this.setState({
            streaming: true,
            source: `/stream/${this.props.magnetURI}/${fileName}`
        });
    }

    render() {

        // If files are being downloaded, but not streamed (ie, user has not selected which file to stream)
        if (!this.state.streaming)
            return <Files streamTorrent={this.streamTorrent} magnetURI={this.props.magnetURI} />;
        else
            return (
                <video height="500" width="800" autoplay controls id="player" src={this.state.source}></video>
            );

    }
}

export default Stream;
